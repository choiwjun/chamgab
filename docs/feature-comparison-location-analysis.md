# 기능 비교: 소상공인365 입지분석 vs 참값

## 📊 소상공인365 입지분석 리포트

### 제공 기능 (스크린샷 분석)

1. **입지 예상매출**
   - 꽃집 월평균 예상매출: **90~110만원**
   - 등급 시스템: **10등급** (1등급이 최고, 10등급이 최저)
   - 시각적 표현: 등급 바 + 이모지 (😐, 😃)

2. **건물 평면도 시각화**
   - 선택한 위치를 빨간색으로 표시
   - 주변 건물 구조 표시

3. **매출 영향 요인 (변수)**
   - 1순위: 직장 여성 인구 수
   - 2순위: 화장실 유동인구수
   - 3순위: 40대 여성 유동인구 수
   - 4순위: 40대 남성 유동인구 수
   - 5순위: 30대 여성 유동인구 수
   - 6순위: 50대 남성 유동인구 수

4. **매출 주이 (주의사항)**
   - "주변과의 접근성 매출에 주이"

---

## 🚀 참값: 구현 가능 여부

### ✅ 이미 구현된 기능

| 소상공인365 기능   | 참값 구현 상태 | 구현 방법                        |
| ------------------ | -------------- | -------------------------------- |
| **예상매출 예측**  | ✅ 구현됨      | `monthly_avg_sales` feature 사용 |
| **성공 점수**      | ✅ 구현됨      | 0-100% 성공 확률 (등급 대신)     |
| **영향 요인 분석** | ✅ 구현됨      | SHAP 기반 요인 순위              |
| **신뢰도 표시**    | ✅ 구현됨      | confidence score                 |

### 🟡 구현 가능한 기능

| 소상공인365 기능  | 참값 구현 가능성 | 필요 작업                    |
| ----------------- | ---------------- | ---------------------------- |
| **등급 시스템**   | 🟡 쉬움          | 성공 확률을 10등급으로 변환  |
| **지도 시각화**   | 🟡 중간          | Kakao Maps API 활용          |
| **유동인구 분석** | 🟡 쉬움          | foot_traffic_statistics 활용 |

### ❌ 구현 어려운 기능

| 소상공인365 기능     | 참값 구현 어려움 | 이유                                       |
| -------------------- | ---------------- | ------------------------------------------ |
| **건물 평면도**      | ❌ 어려움        | 건물 내부 구조 데이터 필요 (공공 API 없음) |
| **실시간 위치 선택** | ❌ 어려움        | 정확한 GPS + 건물 정보 필요                |

---

## 💡 참값의 우세한 점

### 1. AI 기반 예측 (소상공인365는 통계 기반)

```
소상공인365: "90~110만원 예상 (10등급)"
         ↓
참값:        "92만원 예상 (성공 확률 45%)
              주요 요인: 생존율 낮음(-30%), 경쟁 과다(-15%)
              개선 방법: 인접 지역 '안산시 본오동' 추천 (성공 확률 72%)"
```

### 2. 설명 가능한 요인 분석

**소상공인365**:

- 단순 변수 나열 (직장 여성 인구, 유동인구 등)
- 왜 중요한지 설명 없음

**참값**:

- SHAP 기반 영향도 (%) 표시
- 긍정/부정 방향 명시
- 개선 포인트 제안

### 3. 비교 및 대안 제시

**소상공인365**:

- 단일 위치만 분석

**참값**:

- 3개 지역 동시 비교
- 더 나은 대안 추천

---

## 🎯 구현 로드맵

### Phase 1: 기본 입지 분석 (✅ 완료)

- [x] 예상매출 예측
- [x] 성공 확률 계산
- [x] 영향 요인 분석 (SHAP)

### Phase 2: 등급 시스템 추가 (🟡 30분)

```python
def calculate_grade(success_probability: float) -> int:
    """성공 확률을 1~10등급으로 변환"""
    if success_probability >= 90:
        return 1  # 최고 등급
    elif success_probability >= 80:
        return 2
    # ... (10등급까지)
    else:
        return 10  # 최저 등급
```

### Phase 3: 유동인구 분석 강화 (🟡 2시간)

```python
# foot_traffic_statistics 테이블 활용
- age_10s, age_20s, age_30s, age_40s, age_50s, age_60s
- male/female 분리
- time_00_06, time_06_11, time_11_14, time_14_17, time_17_21, time_21_24
```

### Phase 4: 지도 시각화 (🟡 1일)

- Kakao Maps API로 상권 위치 표시
- 주변 경쟁 업소 마커 표시
- 유동인구 히트맵

### Phase 5: 건물 평면도 (❌ 불가능)

- 건물 내부 구조 데이터 필요
- 공공 API 없음
- → 대신 **거리 기반 접근성** 분석 가능

---

## 📊 기능별 비교

| 기능          | 소상공인365          | 참값 (현재)  | 참값 (Phase 2-4 후) |
| ------------- | -------------------- | ------------ | ------------------- |
| 예상매출 예측 | ✅ 범위 (90~110만원) | ✅ 정확한 값 | ✅ 정확한 값 + 범위 |
| 등급 시스템   | ✅ 1~10등급          | ❌ 없음      | ✅ 1~10등급         |
| 성공 확률     | ❌ 없음              | ✅ 0-100%    | ✅ 0-100%           |
| 영향 요인     | 🟡 나열만            | ✅ SHAP 분석 | ✅ SHAP + 유동인구  |
| 건물 평면도   | ✅ 제공              | ❌ 없음      | ❌ 불가능           |
| 지도 시각화   | 🟡 간단              | ❌ 없음      | ✅ Kakao Maps       |
| 비교 기능     | ❌ 없음              | ✅ 3개 지역  | ✅ 3개 지역         |
| 대안 추천     | ❌ 없음              | ✅ AI 추천   | ✅ AI 추천          |

---

## ✅ 결론: 대부분 가능합니다!

### 즉시 가능 (코드만 추가)

1. ✅ **등급 시스템** - 성공 확률을 1~10등급으로 변환
2. ✅ **유동인구 분석** - foot_traffic_statistics 활용
3. ✅ **예상매출 범위** - monthly_avg_sales ± 표준편차

### 단기 구현 가능 (1~2일)

4. 🟡 **지도 시각화** - Kakao Maps API
5. 🟡 **접근성 분석** - 거리 기반 점수 계산

### 구현 불가능

6. ❌ **건물 평면도** - 데이터 없음 (대신 거리 분석)

---

## 🎯 우리의 차별화

소상공인365가 **"어디가 좋다"**를 보여준다면,
참값은 **"왜 좋고, 더 나은 곳은 어디인지"**를 알려줍니다.

### 예시

**소상공인365**:

```
안산시 초지동 꽃집
예상매출: 90~110만원
등급: 10등급 (낮음)
주요 변수: 직장 여성 인구, 유동인구
```

**참값**:

```
안산시 초지동 꽃집
예상매출: 92만원 (신뢰구간: 85~99만원)
성공 확률: 45% (10등급 중 8등급)
주요 요인:
  - 생존율: 62% (평균 대비 -8%) → -30% 영향
  - 경쟁도: 높음 (28개 꽃집) → -15% 영향
  - 유동인구: 30대 여성 부족 → -8% 영향

개선 방안:
  1. 인접 지역 '본오동' 이동 시 → 성공 확률 72%
  2. 업종 변경 '카페'로 전환 시 → 성공 확률 68%
  3. 현 위치 유지 시 '온라인 마케팅 강화' 필요
```

---

## 📌 다음 단계

### 즉시 구현 (30분)

```bash
# 등급 시스템 추가
# ml-api/app/api/commercial.py 수정
```

### 단기 구현 (1~2일)

1. 유동인구 분석 강화
2. 지도 시각화 (Kakao Maps)
3. 프론트엔드 UI 개선

### 장기 구현 (선택)

- 거리 기반 접근성 분석
- 실시간 위치 선택 (GPS)

**결론: 소상공인365의 핵심 기능은 모두 구현 가능하며, 우리의 AI 분석이 더 우수합니다!**
