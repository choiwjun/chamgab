# 참값 분석 모델 신뢰도 평가

## 개요

현재 참값(Chamgab) 부동산 가격 예측 모델의 신뢰도를 종합적으로 평가합니다.

---

## 1. 현재 모델 성능 지표

### 학습 데이터 기반 성능

| 메트릭 | 값 | 평가 |
|--------|-----|------|
| **MAPE** (Mean Absolute Percentage Error) | **5.50%** | ✅ 양호 |
| **R²** (결정계수) | **0.9917** | ✅ 매우 높음 |
| **MAE** | 미측정 | - |
| **RMSE** | 미측정 | - |

**해석:**
- MAPE 5.50%: 평균적으로 실제 가격의 5.5% 오차
- R² 0.9917: 모델이 가격 변동의 99.17%를 설명

---

## 2. 신뢰도 평가 (종합 점수: 65/100)

### 2.1 데이터 품질 (30/50점) ⚠️

#### ✅ 강점
- **KB부동산 공식 데이터 활용**: 신뢰할 수 있는 출처
- **지역별 평균가격 반영**: 실제 시장 가격 기반
- **다양한 피처**: 50개 이상의 피처 사용

#### ⚠️ 약점 (신뢰도 저하 요인)

**1. 시뮬레이션 데이터 의존 (중요)**
- ❌ **실제 거래 데이터가 아닌 시뮬레이션**
- KB 평균가격을 기준으로 개별 거래를 시뮬레이션
- 실제 거래 패턴과 차이 가능성

**2. POI 피처 시뮬레이션**
- ❌ 지하철역, 학교, 병원 거리 등이 **시뮬레이션**
- 실제 좌표 기반 계산이 아님
- 지역별 패턴 기반 추정

**3. 시장 지표 시뮬레이션**
- ❌ 기준금리, 전세가율 등이 **하드코딩된 값**
- 실제 시장 변동성 반영 부족

**4. 매물 특성 시뮬레이션**
- ❌ 재건축 프리미엄, 학군 등급 등이 **추정값**
- 실제 데이터 수집 필요

**점수: 30/50점**
- 이유: 데이터 출처는 신뢰할 수 있으나, 대부분이 시뮬레이션 기반

---

### 2.2 모델 구조 (45/50점) ✅

#### ✅ 강점
- **XGBoost**: 부동산 가격 예측에 검증된 알고리즘
- **SHAP 분석**: 해석 가능한 AI (요인 분석)
- **교차 검증**: 5-Fold CV 구현
- **하이퍼파라미터 튜닝**: Optuna 지원

#### ⚠️ 개선 가능
- 앙상블 모델 미사용 (단일 XGBoost)
- 시간 순서 고려 부족 (시계열 특성)

**점수: 45/50점**
- 이유: 검증된 알고리즘과 방법론 사용

---

### 2.3 피처 엔지니어링 (40/50점) ⚠️

#### ✅ 강점
- **50개 이상의 피처**: 포괄적인 특성 반영
- **카테고리별 분류**: 기본, POI, 시장, 매물 특성
- **파생 피처**: 가격/면적, 층수 비율 등

#### ⚠️ 약점
- **시뮬레이션 피처 비중 높음**: 실제 데이터 수집 필요
- **상호작용 피처 부족**: 피처 간 상관관계 활용 미흡

**점수: 40/50점**
- 이유: 피처 구조는 우수하나 실제 데이터 비중 낮음

---

### 2.4 검증 방법 (35/50점) ⚠️

#### ✅ 강점
- **Train/Test 분할**: 80/20
- **교차 검증**: 5-Fold CV
- **이상치 제거**: IQR 방법

#### ⚠️ 약점
- **실제 거래 데이터로 검증 안 됨**: 시뮬레이션 데이터로만 검증
- **백테스트 부족**: 과거 데이터로 미래 예측 검증 없음
- **외부 검증 없음**: 실제 거래와 비교 검증 없음

**점수: 35/50점**
- 이유: 검증 방법론은 있으나 실제 데이터 검증 부족

---

## 3. 신뢰도 시나리오별 평가

### 시나리오 1: 일반적인 아파트 (서울시 주요 구)

**신뢰도: 70-75%**

- ✅ 지역별 평균가격 데이터 정확
- ✅ 기본 피처 (면적, 층수, 연식) 정확
- ⚠️ POI 피처는 시뮬레이션 (오차 가능)

**예상 오차 범위:** ±5-7%

---

### 시나리오 2: 특수 조건 매물 (재건축, 프리미엄 학군)

**신뢰도: 50-60%**

- ⚠️ 재건축 프리미엄 시뮬레이션
- ⚠️ 학군 등급 추정값
- ⚠️ 실제 시장 반응과 차이 가능

**예상 오차 범위:** ±8-12%

---

### 시나리오 3: 신규 단지 / 데이터 부족 지역

**신뢰도: 40-50%**

- ❌ 학습 데이터에 없는 패턴
- ❌ 지역별 특성 반영 부족
- ❌ 시뮬레이션 의존도 높음

**예상 오차 범위:** ±10-15%

---

## 4. 신뢰도 개선 방안

### 단기 개선 (1-2개월)

#### 1. 실제 거래 데이터 수집 ⭐ 최우선
- **국토교통부 실거래가 API** 활용
- 실제 거래 데이터로 모델 재학습
- **예상 신뢰도 향상: +15점**

#### 2. POI 실제 데이터 수집
- 지하철역, 학교, 병원 실제 좌표 기반 계산
- **예상 신뢰도 향상: +10점**

#### 3. 시장 지표 실제 데이터 연동
- 한국은행 기준금리 API
- KB부동산 전세가율 데이터
- **예상 신뢰도 향상: +5점**

**단기 개선 후 예상 신뢰도: 80-85점**

---

### 중기 개선 (3-6개월)

#### 1. 앙상블 모델
- XGBoost + LightGBM + CatBoost 앙상블
- **예상 신뢰도 향상: +5점**

#### 2. 시간 순서 고려
- 시계열 특성 반영 (최근 거래 가중치)
- **예상 신뢰도 향상: +3점**

#### 3. 지역별 모델
- 서울시 구별 세분화 모델
- **예상 신뢰도 향상: +5점**

**중기 개선 후 예상 신뢰도: 90-95점**

---

### 장기 개선 (6개월+)

#### 1. 딥러닝 모델 추가
- TabNet, Neural Network 앙상블
- **예상 신뢰도 향상: +3점**

#### 2. 실시간 피드백 루프
- 사용자 피드백으로 모델 개선
- **예상 신뢰도 향상: +2점**

---

## 5. 현재 신뢰도 요약

### 종합 평가

| 항목 | 점수 | 비고 |
|------|------|------|
| 데이터 품질 | 30/50 | 시뮬레이션 의존 |
| 모델 구조 | 45/50 | 검증된 방법론 |
| 피처 엔지니어링 | 40/50 | 구조 우수, 데이터 부족 |
| 검증 방법 | 35/50 | 실제 검증 부족 |
| **종합** | **37.5/50** | **75% (중상)** |

### 신뢰도 등급

**현재 등급: B+ (75점)**

- ✅ **일반적인 매물**: 신뢰도 70-75%
- ⚠️ **특수 조건 매물**: 신뢰도 50-60%
- ❌ **신규/데이터 부족 지역**: 신뢰도 40-50%

---

## 6. 사용자에게 제공할 신뢰도 표시

### 신뢰도 레벨 정의

```python
def get_confidence_level(confidence_score: float) -> str:
    """
    신뢰도 점수에 따른 레벨 반환
    
    Args:
        confidence_score: 0-100 점수
    
    Returns:
        레벨: "매우 높음", "높음", "보통", "낮음", "매우 낮음"
    """
    if confidence_score >= 90:
        return "매우 높음", "green"
    elif confidence_score >= 75:
        return "높음", "blue"
    elif confidence_score >= 60:
        return "보통", "yellow"
    elif confidence_score >= 45:
        return "낮음", "orange"
    else:
        return "매우 낮음", "red"
```

### 신뢰도 계산 로직

```python
def calculate_confidence(
    has_real_transaction_data: bool,
    has_real_poi_data: bool,
    has_real_market_data: bool,
    region_data_quality: str,  # "high", "medium", "low"
    property_type: str
) -> float:
    """
    매물별 신뢰도 계산
    
    Returns:
        0-100 신뢰도 점수
    """
    base_score = 50.0
    
    # 데이터 품질 보너스
    if has_real_transaction_data:
        base_score += 20
    if has_real_poi_data:
        base_score += 10
    if has_real_market_data:
        base_score += 5
    
    # 지역 데이터 품질
    if region_data_quality == "high":
        base_score += 10
    elif region_data_quality == "medium":
        base_score += 5
    
    # 매물 타입 보정
    if property_type == "apt" and region_data_quality == "high":
        base_score += 5
    
    return min(100, base_score)
```

---

## 7. 권장사항

### 사용자에게 표시할 내용

1. **신뢰도 레벨 표시**
   - 각 예측 결과에 신뢰도 레벨 표시
   - 색상 코딩 (녹색/파랑/노랑/주황/빨강)

2. **신뢰도 설명**
   - "이 예측은 시뮬레이션 데이터 기반입니다"
   - "실제 거래 데이터 수집 후 정확도가 향상될 예정입니다"

3. **오차 범위 표시**
   - 예측값 ± 오차 범위 표시
   - 예: "25억 원 (±5%)"

4. **데이터 출처 명시**
   - KB부동산 데이터 기반
   - 시뮬레이션 피처 명시

---

## 8. 결론

### 현재 상태

**신뢰도: 75점 (B+ 등급)**

- ✅ 모델 구조와 방법론은 우수
- ⚠️ 시뮬레이션 데이터 의존도가 높음
- ⚠️ 실제 거래 데이터 검증 필요

### 개선 우선순위

1. **최우선**: 실제 거래 데이터 수집 (국토교통부 API)
2. **높음**: POI 실제 데이터 수집
3. **중간**: 시장 지표 실제 데이터 연동
4. **낮음**: 앙상블 모델, 지역별 세분화

### 목표 신뢰도

- **단기 (3개월)**: 80-85점
- **중기 (6개월)**: 90-95점
- **장기 (1년)**: 95점 이상

---

## 참고 자료

- [국토교통부 실거래가 API](https://www.data.go.kr/data/15057511/openapi.do)
- [KB부동산 시세 데이터](https://www.kbland.com/)
- [XGBoost 공식 문서](https://xgboost.readthedocs.io/)
