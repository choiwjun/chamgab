name: Keep HF Space Alive

on:
  schedule:
    # 30분마다 ping (HF 48시간 sleep 방지)
    - cron: '*/30 * * * *'
  workflow_dispatch: # 수동 실행 가능

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping HF Space
        run: |
          response=$(curl -s -o /dev/null -w "%{http_code}" https://hunter8891-chamgab-ml-api.hf.space/health)
          echo "Health check response: $response"
          if [ "$response" != "200" ]; then
            echo "Space might be waking up, retrying in 30s..."
            sleep 30
            curl -s https://hunter8891-chamgab-ml-api.hf.space/health
          fi
